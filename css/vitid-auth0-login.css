/**
 * VIT ID Authentication Login Button Styles
 * 
 * Styles for the VIT ID login button to integrate seamlessly with CiviCRM's login form.
 * Uses institutional color #ab192d.
 */

/* Main container for VIT ID login section - Prominent at top */
.vitid-auth0-login {
  margin: 20px 0 25px 0;
  padding: 0;
  max-width: 100%;
  text-align: center;
  display: flex;
  justify-content: center;
  width: 100%;
}

/* VIT ID login button - Larger and more prominent */
.vitid-auth0-login .vitid-auth0-button {
  display: inline-block;
  width: 100%;
  max-width: 400px;
  padding: 16px 32px;
  background-color: #ab192d;
  color: #ffffff;
  text-decoration: none;
  border-radius: 6px;
  font-weight: 700;
  font-size: 16px;
  line-height: 1.5;
  border: 2px solid #8b1525;
  text-align: center;
  cursor: pointer;
  transition: all 0.2s ease;
  box-sizing: border-box;
  box-shadow: 0 2px 4px rgba(171, 25, 45, 0.2);
}

/* Constrain button width to match form container - more specific selectors */
.crm-container .vitid-auth0-login .vitid-auth0-button,
.crm-container form ~ .vitid-auth0-login .vitid-auth0-button,
form ~ .vitid-auth0-login .vitid-auth0-button {
  max-width: 400px;
}

/* Match button width to form inputs if form is visible */
form#Login.show-standard-form ~ .vitid-auth0-login .vitid-auth0-button,
form[id="Login"].show-standard-form ~ .vitid-auth0-login .vitid-auth0-button {
  max-width: 100%;
}

/* Button hover state */
.vitid-auth0-login .vitid-auth0-button:hover {
  background-color: #8b1525;
  border-color: #6b1019;
  text-decoration: none;
  color: #ffffff;
  box-shadow: 0 4px 8px rgba(171, 25, 45, 0.3);
  transform: translateY(-1px);
}

/* Button focus state for accessibility */
.vitid-auth0-login .vitid-auth0-button:focus {
  outline: 3px solid #ab192d;
  outline-offset: 3px;
  background-color: #8b1525;
  border-color: #6b1019;
}

/* Button active state */
.vitid-auth0-login .vitid-auth0-button:active {
  background-color: #6b1019;
  border-color: #4b0b12;
  transform: translateY(0);
}

/* Icon styling within button */
.vitid-auth0-login .vitid-auth0-button .crm-i {
  margin-right: 10px;
  vertical-align: middle;
  font-size: 18px;
}

/* DO NOT hide entire form - we need to keep logo and VIT ID button visible */
/* Only hide form fields, not the form container itself */

/* PRIMARY METHOD: Hide input-wrapper divs and login-or-forgot div (works regardless of form ID) */
form:not(.show-standard-form) .input-wrapper {
  display: none !important;
  visibility: hidden !important;
}

form:not(.show-standard-form) .login-or-forgot {
  display: none !important;
  visibility: hidden !important;
}

/* Angular-specific: Hide form fields in standalone-auth-form container */
.standalone-auth-form form:not(.show-standard-form) .input-wrapper,
.standalone-auth-form form:not(.show-standard-form) input[name="name"],
.standalone-auth-form form:not(.show-standard-form) input[name="pass"],
.standalone-auth-form form:not(.show-standard-form) input[type="password"],
.standalone-auth-form form:not(.show-standard-form) button[type="submit"],
.standalone-auth-form form:not(.show-standard-form) input[type="submit"],
.standalone-auth-form form:not(.show-standard-form) a[href*="forgot"],
.standalone-auth-form form:not(.show-standard-form) a[href*="password"] {
  display: none !important;
  visibility: hidden !important;
}

/* Show input-wrapper divs when toggle is activated */
form.show-standard-form .input-wrapper {
  display: block !important;
  visibility: visible !important;
}

/* Show login-or-forgot div when toggle is activated */
form.show-standard-form .login-or-forgot {
  display: block !important;
  visibility: visible !important;
}

/* Angular-specific: Show form fields when toggle is activated */
.standalone-auth-form form.show-standard-form .input-wrapper,
.standalone-auth-form form.show-standard-form input[name="name"],
.standalone-auth-form form.show-standard-form input[name="pass"],
.standalone-auth-form form.show-standard-form input[type="password"],
.standalone-auth-form form.show-standard-form button[type="submit"],
.standalone-auth-form form.show-standard-form input[type="submit"],
.standalone-auth-form form.show-standard-form a[href*="forgot"],
.standalone-auth-form form.show-standard-form a[href*="password"] {
  display: block !important;
  visibility: visible !important;
}

/* Ensure submit button displays correctly when shown */
form.show-standard-form .login-or-forgot button[type="submit"],
form.show-standard-form .login-or-forgot input[type="submit"] {
  display: inline-block !important;
}

/* FALLBACK: Hide standard login form fields by default - More comprehensive selectors (backup) */
form#Login:not(.show-standard-form) input[type="text"],
form#Login:not(.show-standard-form) input[type="email"],
form#Login:not(.show-standard-form) input[type="password"],
form#Login:not(.show-standard-form) input[name="name"],
form#Login:not(.show-standard-form) input[name="pass"],
form#Login:not(.show-standard-form) input[name="username"],
form#Login:not(.show-standard-form) input[name="password"],
form[id="Login"]:not(.show-standard-form) input[type="text"],
form[id="Login"]:not(.show-standard-form) input[type="email"],
form[id="Login"]:not(.show-standard-form) input[type="password"],
form[id="Login"]:not(.show-standard-form) input[name="name"],
form[id="Login"]:not(.show-standard-form) input[name="pass"],
form[id="Login"]:not(.show-standard-form) input[name="username"],
form[id="Login"]:not(.show-standard-form) input[name="password"],
form:not(.show-standard-form) input[type="text"][name*="name"],
form:not(.show-standard-form) input[type="password"][name*="pass"] {
  display: none !important;
}

/* Hide labels for username and password fields */
form#Login:not(.show-standard-form) label[for*="name"],
form#Login:not(.show-standard-form) label[for*="pass"],
form#Login:not(.show-standard-form) label:has(+ input[name="name"]),
form#Login:not(.show-standard-form) label:has(+ input[name="pass"]),
form[id="Login"]:not(.show-standard-form) label[for*="name"],
form[id="Login"]:not(.show-standard-form) label[for*="pass"],
form[id="Login"]:not(.show-standard-form) label:has(+ input[name="name"]),
form[id="Login"]:not(.show-standard-form) label:has(+ input[name="pass"]) {
  display: none !important;
}

/* Hide form sections/rows containing username/password - More aggressive hiding */
form#Login:not(.show-standard-form) .crm-section:has(input[name="name"]),
form#Login:not(.show-standard-form) .crm-section:has(input[name="pass"]),
form#Login:not(.show-standard-form) .crm-section:has(input[name="username"]),
form#Login:not(.show-standard-form) .crm-section:has(input[name="password"]),
form#Login:not(.show-standard-form) tr:has(input[name="name"]),
form#Login:not(.show-standard-form) tr:has(input[name="pass"]),
form#Login:not(.show-standard-form) tr:has(input[name="username"]),
form#Login:not(.show-standard-form) tr:has(input[name="password"]),
form#Login:not(.show-standard-form) .crm-form-block > div:has(input[name="name"]),
form#Login:not(.show-standard-form) .crm-form-block > div:has(input[name="pass"]),
form[id="Login"]:not(.show-standard-form) .crm-section:has(input[name="name"]),
form[id="Login"]:not(.show-standard-form) .crm-section:has(input[name="pass"]),
form[id="Login"]:not(.show-standard-form) .crm-section:has(input[name="username"]),
form[id="Login"]:not(.show-standard-form) .crm-section:has(input[name="password"]),
form[id="Login"]:not(.show-standard-form) tr:has(input[name="name"]),
form[id="Login"]:not(.show-standard-form) tr:has(input[name="pass"]),
form[id="Login"]:not(.show-standard-form) tr:has(input[name="username"]),
form[id="Login"]:not(.show-standard-form) tr:has(input[name="password"]),
form[id="Login"]:not(.show-standard-form) .crm-form-block > div:has(input[name="name"]),
form[id="Login"]:not(.show-standard-form) .crm-form-block > div:has(input[name="pass"]) {
  display: none !important;
}

/* Hide form rows/sections more aggressively - fallback for browsers without :has() support */
form#Login:not(.show-standard-form) tr td:has(input[name="name"]),
form#Login:not(.show-standard-form) tr td:has(input[name="pass"]),
form[id="Login"]:not(.show-standard-form) tr td:has(input[name="name"]),
form[id="Login"]:not(.show-standard-form) tr td:has(input[name="pass"]) {
  display: none !important;
}

/* Hide standard login button by default */
form#Login:not(.show-standard-form) button[type="submit"],
form#Login:not(.show-standard-form) input[type="submit"],
form#Login:not(.show-standard-form) .crm-submit-buttons,
form[id="Login"]:not(.show-standard-form) button[type="submit"],
form[id="Login"]:not(.show-standard-form) input[type="submit"],
form[id="Login"]:not(.show-standard-form) .crm-submit-buttons {
  display: none !important;
}

/* Hide "Forgotten password" link by default */
form#Login:not(.show-standard-form) a[href*="forgot"],
form#Login:not(.show-standard-form) a[href*="password"],
form[id="Login"]:not(.show-standard-form) a[href*="forgot"],
form[id="Login"]:not(.show-standard-form) a[href*="password"] {
  display: none !important;
}

/* Show form fields when toggle is activated */
form#Login.show-standard-form input[type="text"],
form#Login.show-standard-form input[type="email"],
form#Login.show-standard-form input[type="password"],
form#Login.show-standard-form input[name="name"],
form#Login.show-standard-form input[name="pass"],
form#Login.show-standard-form label[for*="name"],
form#Login.show-standard-form label[for*="pass"],
form#Login.show-standard-form .crm-section:has(input[name="name"]),
form#Login.show-standard-form .crm-section:has(input[name="pass"]),
form#Login.show-standard-form tr:has(input[name="name"]),
form#Login.show-standard-form tr:has(input[name="pass"]),
form#Login.show-standard-form button[type="submit"],
form#Login.show-standard-form input[type="submit"],
form#Login.show-standard-form .crm-submit-buttons,
form#Login.show-standard-form a[href*="forgot"],
form#Login.show-standard-form a[href*="password"],
form[id="Login"].show-standard-form input[type="text"],
form[id="Login"].show-standard-form input[type="email"],
form[id="Login"].show-standard-form input[type="password"],
form[id="Login"].show-standard-form input[name="name"],
form[id="Login"].show-standard-form input[name="pass"],
form[id="Login"].show-standard-form label[for*="name"],
form[id="Login"].show-standard-form label[for*="pass"],
form[id="Login"].show-standard-form .crm-section:has(input[name="name"]),
form[id="Login"].show-standard-form .crm-section:has(input[name="pass"]),
form[id="Login"].show-standard-form tr:has(input[name="name"]),
form[id="Login"].show-standard-form tr:has(input[name="pass"]),
form[id="Login"].show-standard-form button[type="submit"],
form[id="Login"].show-standard-form input[type="submit"],
form[id="Login"].show-standard-form .crm-submit-buttons,
form[id="Login"].show-standard-form a[href*="forgot"],
form[id="Login"].show-standard-form a[href*="password"] {
  display: block !important;
}

/* Show table rows when toggle is activated */
form#Login.show-standard-form tr:has(input[name="name"]),
form#Login.show-standard-form tr:has(input[name="pass"]),
form[id="Login"].show-standard-form tr:has(input[name="name"]),
form[id="Login"].show-standard-form tr:has(input[name="pass"]) {
  display: table-row !important;
}

/* Toggle button container */
.vitid-auth0-toggle-container {
  margin: 15px 0;
  text-align: center;
}

/* Toggle button styling - Subtle but discoverable */
.vitid-auth0-toggle-btn {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 8px 16px;
  background-color: transparent;
  color: #666666;
  border: 1px solid #dddddd;
  border-radius: 4px;
  font-size: 13px;
  font-weight: 400;
  cursor: pointer;
  transition: all 0.2s ease;
  text-decoration: none;
}

.vitid-auth0-toggle-btn:hover {
  background-color: #f5f5f5;
  border-color: #ab192d;
  color: #ab192d;
}

.vitid-auth0-toggle-btn:focus {
  outline: 2px solid #ab192d;
  outline-offset: 2px;
}

.vitid-auth0-toggle-btn .crm-i {
  font-size: 14px;
}

.vitid-auth0-toggle-btn .vitid-auth0-toggle-text {
  font-size: 13px;
}

/* Ensure logo remains visible - don't hide it */
.crm-logo,
.logo,
img[alt*="CiviCRM"],
img[src*="logo"] {
  display: block !important;
  visibility: visible !important;
}

/* Responsive adjustments for smaller screens */
@media (max-width: 768px) {
  .vitid-auth0-login {
    margin: 15px 0 20px 0;
  }
  
  .vitid-auth0-login .vitid-auth0-button {
    padding: 14px 24px;
    font-size: 15px;
  }
  
  .vitid-auth0-toggle-btn {
    padding: 6px 12px;
    font-size: 12px;
  }
}

/* Match CiviCRM form field styling */
.vitid-auth0-login {
  box-sizing: border-box;
}

